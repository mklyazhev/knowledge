# Cross-Origin Resource Sharing (CORS)

https://cloud.yandex.ru/docs/glossary/cors
https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS
***CORS (Cross-Origin Resource Sharing, англ.  «совместное использование ресурсов разных источников»)*** — это стандарт, позволяющий предоставлять веб-страницам доступ к объектам сторонних интернет-ресурсов. Сторонним считается любой интернет-ресурс, который отличается от запрашиваемого протоколом, доменом или портом.

>[!example] **Пример cross-origin запроса**
>
>HTML страница, обслуживаемая сервером с `http://domain-a.com`, запрашивает [`<img> src`](https://developer.mozilla.org/ru/docs/Web/HTML/Element/img#attributes) по адресу `http://domain-b.com/image.jpg`. Сегодня многие страницы загружают ресурсы вроде CSS-стилей, изображений и скриптов с разных доменов, соответствующих разным сетям доставки контента (Content delivery networks, CDNs).

В целях безопасности браузеры ограничивают cross-origin запросы, инициируемые скриптами. Например, [`XMLHttpRequest`](https://developer.mozilla.org/ru/docs/Web/API/XMLHttpRequest) и [Fetch API](https://developer.mozilla.org/ru/docs/Web/API/Fetch_API) следуют *политике одного источника* ([same-origin policy](https://developer.mozilla.org/ru/docs/Web/Security/Same-origin_policy)). Это значит, что web-приложения, использующие такие API, могут запрашивать HTTP-ресурсы только с того домена, с которого были загружены, пока не будут использованы CORS-заголовки.

![](https://developer.mozilla.org/ru/docs/Web/HTTP/CORS/cors_principle.png)

## Структура Cross-Origin Resource Sharing

Методы CORS предназначены для управления доступом к дескрипторам (тегам) на веб-страницах в сети. Управляемые типы доступа подразделяются на три основных категории по работе с информацией сторонних ресурсов:

1. _Доступ на запись_ — это доступ к ссылкам, заполнению веб-форм и переадресации на сторонние веб-страницы, т.е. на передачу информации в сторонний источник (веб-ресурс).

2. _Доступ на вставку_ относится к категории доступа на считывание информации из стороннего источника. К этому типу принадлежат вставки в код дескрипторов `audio`, `video`, `img`, `embed`, `object`, `link`, `script`, `iframe` и другие элементы оформления веб-страниц. Структура подобных дескрипторов подразумевает самостоятельную инициацию перекрестных (cross-origin) запросов из сторонних источников. Все дескрипторы этой категории представляют низкий уровень угрозы безопасности, поэтому разрешены в веб-браузере по умолчанию.

3. _Доступ на считывание_ — это дескрипторы, загружаемые с использованием фоновых методов вызова, таких как `fetch()`, технологии обмена данными Ajax и пр. Поскольку подобные дескрипторы могут содержать в теле любые участки кода (в том числе вредоносного), они запрещены в веб-браузерах по умолчанию.

При настройке веб-сайта механизм CORS позволяет выборочно блокировать различные категории доступа пользователя к ресурсам (запись, вставку или считывание).